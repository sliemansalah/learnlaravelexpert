 تم تثبيت Laravel بنجاح. الآن دعني أتحقق من المشروع:

● ممتاز! تم إنشاء المشروع بنجاح. دعني أتحقق من أن كل شيء يعمل:

● Bash(cd "D:/laravel-projects/learnlaravel/learnlaravelexpert" && php artisan --version)
  ⎿  Laravel Framework 12.40.1

● ---
  تم تثبيت Laravel 12.40.1 بنجاح!

  الآن نبدأ الدرس الأول: Migrations & Relationships

  ---
  مشروع: نظام إدارة مدرسة 🏫

  تصميم قاعدة البيانات:

  ┌─────────────────────────────────────────────────────────────────────────┐
  │                         Database Schema                                  │
  ├─────────────────────────────────────────────────────────────────────────┤
  │                                                                          │
  │  ┌──────────┐     ┌──────────────┐     ┌──────────┐                     │
  │  │ teachers │────<│ classrooms   │>────│ students │                     │
  │  └──────────┘     └──────────────┘     └──────────┘                     │
  │       │                  │                   │                           │
  │       │           ┌──────┴──────┐           │                           │
  │       │           │             │           │                           │
  │       ▼           ▼             ▼           ▼                           │
  │  ┌──────────┐  ┌──────────┐  ┌──────────────────┐                       │
  │  │ subjects │  │ schedules│  │     grades       │                       │
  │  └──────────┘  └──────────┘  └──────────────────┘                       │
  │                                                                          │
  │  العلاقات:                                                               │
  │  • Teacher hasMany Subjects                                             │
  │  • Teacher hasOne Classroom (رئيس الفصل)                                │
  │  • Classroom belongsTo Teacher                                          │
  │  • Classroom hasMany Students                                           │
  │  • Student belongsTo Classroom                                          │
  │  • Student belongsToMany Subjects (Many-to-Many عبر grades)            │
  │  • Subject belongsToMany Students                                       │
  └─────────────────────────────────────────────────────────────────────────┘

  ---
  هل أبدأ بإنشاء:
  1. الـ Migrations (ملفات إنشاء الجداول)
  2. الـ Models (مع العلاقات)
  3. الـ Seeders (بيانات تجريبية)

  ثم ننتقل لكتابة الـ Controllers والـ APIs؟

────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
> 
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  ? for shortcuts


  
● شرح العلاقات في Laravel بالعربي

  أنواع العلاقات الأساسية


                                                                        │
  │  ┌──────────┐     ┌──────────────┐     ┌──────────┐                     │
  │  │ teachers │────<│ classrooms   │>────│ students │                     │
  │  └──────────┘     └──────────────┘     └──────────┘                     │
  │       │                  │                   │                           │
  │       │           ┌──────┴──────┐           │                           │
  │       │           │             │           │                           │
  │       ▼           ▼             ▼           ▼                           │
  │  ┌──────────┐  ┌──────────┐  ┌──────────────────┐                       │
  │  │ subjects │  │ schedules│  │     grades       │                       │
  │  └──────────┘  └──────────┘  └──────────────────┘  

  ┌─────────────────────────────────────────────────────────────────────────┐
  │                    أنواع العلاقات في Laravel                            │
  ├─────────────────────────────────────────────────────────────────────────┤
  │                                                                          │
  │  1️⃣  One to One (واحد لواحد)                                            │
  │      مثال: كل معلم له ملف شخصي واحد فقط                                  │
  │      Teacher ←→ Profile                                                  │
  │                                                                          │
  │  2️⃣  One to Many (واحد لكثير)                                           │
  │      مثال: المعلم يدرّس عدة مواد                                         │
  │      Teacher → Subject, Subject, Subject                                │
  │                                                                          │
  │  3️⃣  Many to Many (كثير لكثير)                                          │
  │      مثال: الطالب يدرس عدة مواد، والمادة يدرسها عدة طلاب                │
  │      Students ←→ Subjects (عبر جدول وسيط: grades)                       │
  │                                                                          │
  └─────────────────────────────────────────────────────────────────────────┘

  ---
  1️⃣ علاقة One to One (واحد لواحد)

  ┌─────────────┐           ┌─────────────┐
  │   Teacher   │           │   Profile   │
  ├─────────────┤           ├─────────────┤
  │ id          │──────────▶│ id          │
  │ name        │     1:1   │ teacher_id  │ ◀── المفتاح الأجنبي
  │ email       │           │ bio         │
  └─────────────┘           │ photo       │
                            └─────────────┘

  💡 الشرح:
  - كل معلم له ملف شخصي واحد فقط
  - كل ملف شخصي يخص معلم واحد فقط
  - teacher_id في جدول Profile يشير للمعلم

  في Laravel:
  ┌────────────────────────────────────────┐
  │ // في Model Teacher                    │
  │ public function profile() {            │
  │     return $this->hasOne(Profile::class);│
  │ }                                       │
  ├────────────────────────────────────────┤
  │ // في Model Profile                    │
  │ public function teacher() {            │
  │     return $this->belongsTo(Teacher::class);│
  │ }                                       │
  └────────────────────────────────────────┘

  ---
  2️⃣ علاقة One to Many (واحد لكثير)

  ┌─────────────┐           ┌─────────────┐
  │  Classroom  │           │   Student   │
  ├─────────────┤           ├─────────────┤
  │ id          │──┬───────▶│ id          │
  │ name        │  │   1:N  │ classroom_id│ ◀── المفتاح الأجنبي
  │ grade       │  │        │ name        │
  └─────────────┘  │        └─────────────┘
                   │        ┌─────────────┐
                   │        │   Student   │
                   ├───────▶├─────────────┤
                   │        │ id          │
                   │        │ classroom_id│
                   │        │ name        │
                   │        └─────────────┘
                   │        ┌─────────────┐
                   └───────▶│   Student   │
                            └─────────────┘

  💡 الشرح:
  - الفصل الواحد فيه عدة طلاب (hasMany)
  - الطالب ينتمي لفصل واحد فقط (belongsTo)

  في Laravel:
  ┌────────────────────────────────────────┐
  │ // في Model Classroom                  │
  │ public function students() {           │
  │     return $this->hasMany(Student::class);│
  │ }                                       │
  ├────────────────────────────────────────┤
  │ // في Model Student                    │
  │ public function classroom() {          │
  │     return $this->belongsTo(Classroom::class);│
  │ }                                       │
  └────────────────────────────────────────┘

  الاستخدام:
  $classroom->students;     // كل طلاب الفصل
  $student->classroom;      // فصل الطالب

  ---
  3️⃣ علاقة Many to Many (كثير لكثير)

  ┌─────────────┐       ┌─────────────────┐       ┌─────────────┐
  │   Student   │       │     grades      │       │   Subject   │
  ├─────────────┤       │  (جدول وسيط)    │       ├─────────────┤
  │ id          │◀──────│ student_id      │──────▶│ id          │
  │ name        │  N:M  │ subject_id      │       │ name        │
  │ email       │       │ score           │       │ description │
  └─────────────┘       │ semester        │       └─────────────┘
                        └─────────────────┘

  💡 الشرح:
  - الطالب يدرس عدة مواد
  - المادة يدرسها عدة طلاب
  - نحتاج جدول وسيط (pivot table) يربط بينهما
  - الجدول الوسيط يمكن أن يحتوي بيانات إضافية (الدرجة، الفصل الدراسي)

  في Laravel:
  ┌────────────────────────────────────────────────────┐
  │ // في Model Student                                │
  │ public function subjects() {                       │
  │     return $this->belongsToMany(Subject::class,    │
  │         'grades')         // اسم الجدول الوسيط     │
  │         ->withPivot('score', 'semester')           │
  │         ->withTimestamps();                        │
  │ }                                                  │
  ├────────────────────────────────────────────────────┤
  │ // في Model Subject                                │
  │ public function students() {                       │
  │     return $this->belongsToMany(Student::class,    │
  │         'grades')                                  │
  │         ->withPivot('score', 'semester')           │
  │         ->withTimestamps();                        │
  │ }                                                  │
  └────────────────────────────────────────────────────┘

  الاستخدام:
  $student->subjects;                    // كل مواد الطالب
  $subject->students;                    // كل طلاب المادة
  $student->subjects->first()->pivot->score;  // درجة الطالب

  ---
  📊 ملخص العلاقات في مشروعنا

  ┌──────────────────────────────────────────────────────────────────┐
  │                    علاقات نظام المدرسة                           │
  ├──────────────────────────────────────────────────────────────────┤
  │                                                                   │
  │  Teacher (المعلم)                                                │
  │  ├── hasOne → Classroom (رئيس فصل واحد)                         │
  │  └── hasMany → Subjects (يدرّس عدة مواد)                        │
  │                                                                   │
  │  Classroom (الفصل)                                               │
  │  ├── belongsTo → Teacher (له معلم رئيسي واحد)                   │
  │  └── hasMany → Students (فيه عدة طلاب)                          │
  │                                                                   │
  │  Student (الطالب)                                                │
  │  ├── belongsTo → Classroom (في فصل واحد)                        │
  │  └── belongsToMany → Subjects (يدرس عدة مواد) عبر grades       │
  │                                                                   │
  │  Subject (المادة)                                                │
  │  ├── belongsTo → Teacher (يدرّسها معلم واحد)                    │
  │  └── belongsToMany → Students (يدرسها عدة طلاب) عبر grades      │
  │                                                                   │
  │  Grade (الدرجات) - جدول وسيط                                     │
  │  ├── belongsTo → Student                                         │
  │  └── belongsTo → Subject                                         │
  │  └── يحتوي: score, semester, exam_type                          │
  │                                                                   │
  └──────────────────────────────────────────────────────────────────┘

  ---
  الفرق بين hasOne و belongsTo

  hasOne:    "أنا أملك شيء واحد"     → المفتاح الأجنبي في الجدول الآخر
  belongsTo: "أنا أنتمي لشيء واحد"   → المفتاح الأجنبي في جدولي أنا

  مثال:
  ┌─────────────┐                    ┌─────────────┐
  │  Classroom  │                    │   Teacher   │
  ├─────────────┤                    ├─────────────┤
  │ id          │                    │ id          │
  │ teacher_id  │◀───────────────────│             │
  │ name        │                    │ name        │
  └─────────────┘                    └─────────────┘
    belongsTo                          hasOne

  Classroom: لدي teacher_id → أنا belongsTo Teacher
  Teacher: ليس لدي classroom_id → أنا hasOne Classroom

  ---
  هل تريد أن نبدأ الآن بإنشاء الـ Migrations والـ Models عملياً؟ سأشرح كل سطر كود أثناء الكتابة.

────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
> 
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  ? for shortcuts

